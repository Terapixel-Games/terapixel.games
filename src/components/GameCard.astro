---
import type { Game } from '../types';

interface Props {
  game: Game;
}

const { game } = Astro.props;
const detailHref = `/${game.slug}`;
const isPlayable = Boolean(game.embedUrl || game.fullScreenUrl) && !game.isComingSoon;
---

<article class="space-y-4">
  {
    isPlayable ? (
      <a href={detailHref} class="block">
        <img
          src={game.image}
          alt={game.title}
          class="h-52 w-full object-cover"
          loading="lazy"
          onerror="this.onerror=null;this.src='/images/placeholder-game.svg';"
        />
      </a>
    ) : (
      <img
        src={game.image}
        alt={game.title}
        class="h-52 w-full object-cover"
        loading="lazy"
        onerror="this.onerror=null;this.src='/images/placeholder-game.svg';"
      />
    )
  }

  <div class="space-y-2 text-center">
    <h2 class="text-2xl font-normal">{game.title}</h2>
    {
      isPlayable ? (
        <a href={detailHref} class="text-base underline underline-offset-4">
          Play Now
        </a>
      ) : (
        <span class="text-base text-zinc-400">Coming Soon</span>
      )
    }
  </div>
</article>